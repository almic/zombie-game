[gd_scene load_steps=17 format=3 uid="uid://dpw3tt0t5w2c4"]

[ext_resource type="Script" uid="uid://bwqhte63kxw8" path="res://scene/weapon/rifle/rifle.gd" id="2_fyojs"]
[ext_resource type="Material" uid="uid://dyqjebm1whfam" path="res://material/level/flat_black.tres" id="2_pgrwu"]
[ext_resource type="Material" uid="uid://dxyayckyjwrdj" path="res://material/level/flat_orange.tres" id="3_y8syv"]
[ext_resource type="PackedScene" uid="uid://c5jvwtxvcglky" path="res://scene/weapon/rifle/rifle_mag_mesh.tscn" id="4_y8syv"]
[ext_resource type="Animation" uid="uid://brbgoh5tryvyw" path="res://animation/rifle/rifle_RESET.res" id="5_qqsv1"]
[ext_resource type="AnimationLibrary" uid="uid://b4bv1ijnrxguc" path="res://animation/rifle/rifle_animation.res" id="6_fyojs"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://bcv0pipwlmiqy" path="res://animation/rifle/rifle_anim_tree.tres" id="7_fyojs"]

[sub_resource type="CylinderMesh" id="CylinderMesh_xkfre"]
material = ExtResource("2_pgrwu")
top_radius = 0.01
bottom_radius = 0.01
height = 0.5

[sub_resource type="BoxMesh" id="BoxMesh_qqsv1"]
material = ExtResource("3_y8syv")
size = Vector3(0.05, 0.075, 0.3)

[sub_resource type="CylinderMesh" id="CylinderMesh_fyojs"]
material = ExtResource("2_pgrwu")
top_radius = 0.022
bottom_radius = 0.022
height = 0.33

[sub_resource type="BoxMesh" id="BoxMesh_mbpeo"]
material = ExtResource("2_pgrwu")
size = Vector3(0.03, 0.03, 0.1)

[sub_resource type="BoxMesh" id="BoxMesh_3c15l"]
material = ExtResource("3_y8syv")
size = Vector3(0.04, 0.08, 0.18)

[sub_resource type="BoxMesh" id="BoxMesh_3d6q2"]
material = ExtResource("2_pgrwu")
size = Vector3(0.035, 0.1, 0.06)

[sub_resource type="CylinderMesh" id="CylinderMesh_mbpeo"]
material = ExtResource("2_pgrwu")
top_radius = 0.006
bottom_radius = 0.006
height = 0.03

[sub_resource type="QuadMesh" id="QuadMesh_3c15l"]
material = ExtResource("2_pgrwu")
size = Vector2(0.075, 0.005)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3d6q2"]
_data = {
&"RESET": ExtResource("5_qqsv1")
}

[node name="Rifle" type="Node3D" node_paths=PackedStringArray("eject_marker", "projectile_marker", "particle_marker", "reload_marker", "magazine_marker", "recoil_marker")]
script = ExtResource("2_fyojs")
eject_marker = NodePath("Mesh/EjectMarker")
projectile_marker = NodePath("Mesh/BarrelMarker")
particle_marker = NodePath("Mesh/BarrelMarker")
reload_marker = NodePath("ReloadMarker")
magazine_marker = NodePath("Mesh/MagazineMarker")
recoil_marker = NodePath("RecoilMarker")
metadata/_custom_type_script = "uid://ddecsnlrrapmh"

[node name="Mesh" type="Node3D" parent="."]
unique_name_in_owner = true

[node name="protomesh" type="Node3D" parent="Mesh"]

[node name="barrel" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, -0.22)
mesh = SubResource("CylinderMesh_xkfre")

[node name="body" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.01, 0.025)
mesh = SubResource("BoxMesh_qqsv1")

[node name="barrel_cover" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, -0.29)
mesh = SubResource("CylinderMesh_fyojs")

[node name="stock_attach" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.00944, 0.225)
mesh = SubResource("BoxMesh_mbpeo")

[node name="stock" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.02, 0.36)
mesh = SubResource("BoxMesh_3c15l")

[node name="grip" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(1, 0, 0, 0, 0.984808, 0.173648, 0, -0.173648, 0.984808, 0, -0.09, 0.135)
mesh = SubResource("BoxMesh_3d6q2")

[node name="charge_handle" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(0, -1, 0, 1, 0, 0, 0, 0, 1, -0.04, 0, 0.015)
mesh = SubResource("CylinderMesh_mbpeo")

[node name="handle_track" type="MeshInstance3D" parent="Mesh/protomesh"]
transform = Transform3D(0, 0, -1, 0, 1, 0, 1, 0, 0, -0.026, 0, 0.05)
mesh = SubResource("QuadMesh_3c15l")

[node name="BarrelMarker" type="Marker3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.48)
visible = false

[node name="MagazineMarker" type="Marker3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.075, -0.04)
gizmo_extents = 0.0

[node name="RifleMagMesh" parent="Mesh/MagazineMarker" instance=ExtResource("4_y8syv")]

[node name="EjectMarker" type="Marker3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.02, 0, -0.04)
visible = false

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_3d6q2"),
&"rifle": ExtResource("6_fyojs")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
unique_name_in_owner = true
root_node = NodePath("%AnimationTree/..")
tree_root = ExtResource("7_fyojs")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")

[node name="ReloadMarker" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.075, -0.04)
visible = false

[node name="RecoilMarker" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.42)
visible = false
